---
import Head from '@landmarks/common/Head.astro'
import Header from '@landmarks/common/Header.astro'
import Footer from '@landmarks/common/Footer.astro'
import Hero from '@landmarks/Hero.astro'

import {fetchGraphQL} from '@services/sanity'
import {identityQuery} from '@queries/identity'
import type {PageInfo} from '@interfaces/pageInfo'
import type {Identity} from '@interfaces/identity'

import '@styles/global.css'
import '@styles/layouts/common.css'

interface Props {
  pageInfo: PageInfo
}

const response = await fetchGraphQL<{Identity: Identity}>(identityQuery)
const identity: Identity = response?.Identity || {
  name: 'Loading...',
  email: '',
  phone: '',
  address: '',
  officeHours: '',
  socials: {facebook: '', instagram: ''}
}

const {pageInfo} = Astro.props
---

<html lang="en-US">
  <Head {pageInfo} {identity} />
  <body>
    <Header {identity} />
    <main>
      <Hero {pageInfo} />
      <slot />
    </main>
    <Footer {identity} />
  </body>
</html>
