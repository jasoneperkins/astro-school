---
import Head from '@landmarks/common/Head.astro'
import Header from '@landmarks/common/Header.astro'
import Drawer from '@landmarks/common/Drawer.astro'
import Footer from '@landmarks/common/Footer.astro'
import Hero from '@landmarks/Hero.astro'

import { fetchGraphQL } from '@services/sanity'
import { fetchIdentity } from '@queries/identity'
import { fetchClassrooms } from '@queries/classroom'

import type { Identity } from '@interfaces/identity'
import type { Info } from '@interfaces/info'
import type { Seo } from '@interfaces/seo'
import type { Social } from '@interfaces/social'

interface Props {
  info: Info
  seo?: Seo
  social?: Social
}

import '@styles/global.css'
import '@styles/layouts/common.css'

const identity = ((await fetchIdentity()) as Identity) || {}
const classrooms = await fetchClassrooms()
const { info, seo, social } = Astro.props
---

<html lang="en-US">
  <Head {info} {identity} seo={seo || {}} {social} />
  <body x-data="{ isDrawerOpen: false }">
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:z-50 focus:bg-white focus:p-4 focus:text-blue-900"
    >
      Skip to content
    </a>
    <Header {identity} {classrooms} />
    <main id="main-content">
      <Hero {info} {seo} />
      <slot />
    </main>
    <Footer {identity} />
    <Drawer {identity} {classrooms} />
  </body>
</html>
