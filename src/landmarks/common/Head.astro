---
import {SEO} from 'astro-seo'
import {urlFor} from '@services/sanity'
import type {PageInfo} from '@interfaces/pageInfo'
import type {Identity} from '@interfaces/identity'

interface Props {
  pageInfo: PageInfo
  identity: Identity
}

const {href} = Astro.url
const {pageInfo, identity} = Astro.props
const {name: siteName} = identity as Identity
const {
  title = 'Early Childhood Learning Center',
  description = 'A nurturing preschool environment in Stuart, Florida.',
  mainImage,
  author = 'ECLC Staff',
  seoTitle
} = pageInfo || {}
const displayTitle = seoTitle || title || siteName

const ogImageUrl = mainImage
  ? urlFor(mainImage).width(1200).height(630).url()
  : '/default-og.jpg'
---

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <SEO
    title={displayTitle}
    titleTemplate={`%s | ${siteName}`}
    description={description}
    canonical={href}
    openGraph={{
      basic: {
        title: displayTitle,
        type: 'website',
        image: ogImageUrl
      },
      article: {
        authors: [author]
      }
    }}
    twitter={{
      card: 'summary_large_image',
      title: displayTitle,
      description: description,
      image: ogImageUrl
    }}
  />

  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="icon.png" />

  <link rel="manifest" href="site.webmanifest" />
  <meta name="theme-color" content="#fafafa" />
  <meta name="generator" content={Astro.generator} />
</head>
