---
import { Icon } from 'astro-icon/components'

import { fetchGraphQL } from '@services/sanity'
import type { Identity } from '@interfaces/identity'
import MapFacade from '@components/MapFacade.astro'

import '@styles/landmarks/common/footer.css'

interface Props {
  identity: Identity
}

const { identity } = Astro.props
const { name, phone, email, address, officeHours } = identity as Identity
const currentYear = new Date().getFullYear()
---

<footer
  id="commonFooter"
  class="content gap-content grid bg-blue text-white"
>
  <div
    class="grid grid-cols-1 gap-x-2 gap-y-6 py-8 md:grid-cols-2 lg:grid-cols-4"
  >
    <div>
      <h2 class="mb-4 text-lg! text-white!">Quick Links</h2>
      <nav aria-label="Footer Quick Links">
        <ul class="space-y-3 text-sm">
          <li><a href="/">Home</a></li>
          <li><a href="/about">About Us</a></li>
          <li><a href="#">Classrooms</a></li>
          <li><a href="#">Newsletters</a></li>
        </ul>
      </nav>
    </div>
    <div>
      <h2 class="mb-4 text-lg! text-white!">Programs</h2>
      <nav aria-label="Footer Programs">
        <ul class="space-y-3 text-sm">
          <li><a href="#">Toddlers (12-24 Months)</a></li>
          <li><a href="#">Terrific Twos (24-36 Months)</a></li>
          <li><a href="#">Preschool 3's</a></li>
          <li><a href="#">VPK / Pathfinders</a></li>
        </ul>
      </nav>
    </div>
    <div class="md:col-span-2">
      <h2 class="mb-4 text-lg! text-white!">Contact Us</h2>
      <address class="grid space-y-3 gap-x-4 text-sm not-italic md:grid-cols-2">
        <MapFacade {address} {name} />
        <ul class="space-y-4">
          <li>
            <a
              href={`tel:${phone.replace(/\D/g, '')}`}
              class="flex gap-x-1"
              aria-label={`Call us at ${phone}`}>
              <Icon
                name="line-md:phone-twotone-loop"
                aria-hidden="true"
                class="text-lg"
              />
              {phone}
            </a>
          </li>
          <li>
            <a
              href={`mailto:${email}`}
              class="flex gap-x-1"
              aria-label={`Email us at ${email}`}>
              <Icon
                name="line-md:email-filled"
                aria-hidden="true"
                class="text-lg"
              />
              {email}
            </a>
          </li>
          <li class="flex gap-x-1">
            <Icon
              name="line-md:sunny-twotone-loop"
              aria-hidden="true"
              class="text-lg"
            />
            {officeHours}
          </li>
          <li class="flex gap-x-1">
            <a
              href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`}
              target="_blank"
              rel="noopener noreferrer"
              class="flex gap-x-1"
              aria-label={`Visit us at ${address}`}>
              <Icon
                name="line-md:map-marker-twotone-loop"
                aria-hidden="true"
                class="text-lg lg:text-2xl"
              />
              {address}
            </a>
          </li>
        </ul>
      </address>
    </div>
  </div>
  <address
    class="tiny flex flex-wrap justify-between gap-2 border-t border-t-white/30 py-4 not-italic"
  >
    <p class="mb-0!">
      Â© {currentYear}
      {name}. All rights reserved.
    </p>
    <p>Licensed by the State of Florida.</p>
  </address>
</footer>
