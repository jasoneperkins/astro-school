---
// src/landmarks/common/Drawer.astro
import {Icon} from 'astro-icon/components'
import type {Identity} from '@interfaces/identity'

interface Props {
  identity: Identity
}

const {identity} = Astro.props
---

<aside
  id="mobile-drawer"
  x-data="{ isOpen: false, activeMenu: null }"
  @toggle-drawer.window="isOpen = !isOpen"
  x-show="isOpen"
  class="fixed inset-0 z-50 md:hidden"
  aria-modal="true"
  role="dialog">
  <div
    x-show="isOpen"
    x-transition.opacity
    @click="isOpen = false"
    class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm">
  </div>

  <div
    x-show="isOpen"
    x-transition:enter="transition transform ease-out duration-300"
    x-transition:enter-start="-translate-y-full"
    x-transition:leave="transition transform ease-in duration-200"
    x-transition:leave-end="-translate-y-full"
    class="relative flex flex-col rounded-b-3xl bg-white shadow-2xl">
    <div class="flex items-center justify-between border-b p-5">
      <span class="text-lg font-bold text-blue-900">{identity.name}</span>
      <button @click="isOpen = false" class="p-2 text-2xl text-slate-500">
        <Icon name="line-md:close-to-menu-transition" />
      </button>
    </div>

    <nav class="overflow-y-auto p-5">
      <ul class="space-y-4">
        <li>
          <a href="/" class="block text-xl font-bold text-blue-900">Home</a>
        </li>
        <li>
          <button
            @click="activeMenu === 'classrooms' ? activeMenu = null : activeMenu = 'classrooms'"
            class="flex w-full items-center justify-between text-xl font-bold text-blue-900">
            Classrooms <Icon
              name="line-md:chevron-small-down"
              ::class="activeMenu === 'classrooms' ? 'rotate-180' : ''"
              class="transition-transform"
            />
          </button>
          <ul
            x-show="activeMenu === 'classrooms'"
            x-collapse
            class="mt-2 space-y-2 pl-4">
            <li>
              <a href="/classrooms/toddlers" class="text-lg text-slate-600">
                Toddlers
              </a>
            </li>
            <li>
              <a href="/classrooms/infants" class="text-lg text-slate-600">
                Infants
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</aside>
