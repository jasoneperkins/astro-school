---
import { urlFor } from '@services/sanity'
import type { Testimonial } from '@interfaces/testimonial'
import type { Heading } from '@interfaces/heading'

interface Props {
  heading?: Heading
  slug?: { current: string }
  testimonials?: Testimonial[]
}

const {
  heading = { title: 'Testimonials', subTitle: '' },
  slug = { current: 'testimonials' },
  testimonials = []
} = Astro.props
---

<section id={slug?.current} class="content py-content-block">
  {heading?.title && (
    <header class="mb-12 text-center">
      <hgroup>
        <h2 id={slug.current}>{heading.title}</h2>
        {heading?.subTitle && <p class="tagline">{heading.subTitle}</p>}
      </hgroup>
    </header>
  )}

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {testimonials.map((testimonial) => (
      <figure class="flex flex-col rounded-2xl bg-white p-8 shadow-md ring-1 ring-gray-200">
        <blockquote class="flex-1 text-lg font-medium leading-7 text-gray-900 italic">
          <p>“{testimonial.quote}”</p>
        </blockquote>
        <figcaption class="mt-8 flex items-center gap-x-4 border-t border-gray-100 pt-6">
          {testimonial.image && (
            <img
              src={urlFor(testimonial.image).width(100).height(100).url()}
              alt={testimonial.author}
              class="h-12 w-12 rounded-full bg-gray-50 object-cover"
            />
          )}
          <div>
            <div class="font-semibold text-gray-900">{testimonial.author}</div>
            <div class="text-sm leading-6 text-gray-600">{testimonial.title}</div>
          </div>
        </figcaption>
      </figure>
    ))}
  </div>
</section>
