---
// layout
import Layout from '@layouts/Common.astro'

// content sections
import Benefits from '@content/benefits.astro'
import Cta from '@content/cta.astro'
import Services from '@content/services.astro'
import Solutions from '@content/solutions.astro'
import Newsletters from '@content/newsletters.astro'
import Testimonials from '@content/testimonials.astro'

// components
import ContactForm from '@components/ContactForm.astro'
import IconCard from '@components/IconCard.astro'

// styles
import '@styles/pages/home.css'

// queries
import {fetchPage} from '@queries/page'
import {urlFor} from '@services/sanity'

// interfaces
import type {Info} from '@interfaces/info'
import type {Section} from '@interfaces/section'
import type {Seo} from '@interfaces/seo'
import type {Social} from '@interfaces/social'

// props
interface Props {
  info: Info
  content: Section[]
  seo: Seo
  social: Social
}

// queries
const homePage = await fetchPage('index')
const {info, content, seo, social} = homePage

// content
const cta = content?.find(
  (section: Section) => section.name === 'call-to-action'
)
const solutions = content?.find(
  (section: Section) => section.name === 'solutions'
)
const benefits = content?.find(
  (section: Section) => section.name === 'benefits'
)
const services = content?.find(
  (section: Section) => section.name === 'services'
)
const newsletters = content?.find(
  (section: Section) => section._key === 'd4fa8d2b9207'
)
const testimonials = content?.find(
  (section: Section) => section.name === 'testimonials'
)
---

<Layout {info} {seo} {social}>
  {benefits && <Benefits {...benefits} />}
  {solutions && <Solutions {...solutions} />}
  {services && <Services {...services} />}
  {testimonials && <Testimonials {...testimonials} />}
  {cta && <Cta {...cta} />}
  {newsletters && <Newsletters {...newsletters} />}
</Layout>
