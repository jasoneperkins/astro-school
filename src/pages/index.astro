---
// layout
import Layout from '@layouts/Common.astro'

// styles
import '@styles/pages/home.css'

// content sections
import Benefits from '@content/benefits.astro'
import Cta from '@content/cta.astro'
import Faqs from '@content/faqs.astro'
import Features from '@content/features.astro'
import Solutions from '@content/solutions.astro'
import Newsletters from '@content/newsletters.astro'
import Testimonials from '@content/testimonials.astro'

// components
import ContactForm from '@components/ContactForm.astro'
import IconCard from '@components/IconCard.astro'

// utilities
import {fetchPage} from '@queries/page'
import {urlFor} from '@services/sanity'

// interfaces
import type {Info} from '@interfaces/info'
import type {Section} from '@interfaces/section'
import type {Seo} from '@interfaces/seo'
import type {Social} from '@interfaces/social'

// props
interface Props {
  info: Info
  content: Section[]
  seo: Seo
  social: Social
}

// queries
const homePage = await fetchPage('index')
const {info, content, seo, social} = homePage

// content
const benefits = content?.find(
  (section: Section) => section.name === 'benefits'
)
const cta = content?.find(
  (section: Section) => section.name === 'call-to-action'
)
const features = content?.find(
  (section: Section) => section.name === 'features'
)
const faqs = content?.find((section: Section) => section.name === 'faqs')
const newsletters = content?.find(
  (section: Section) => section.name === 'newsletters'
)
const solutions = content?.find(
  (section: Section) => section.name === 'solutions'
)
const testimonials = content?.find(
  (section: Section) => section.name === 'testimonials'
)
---

<Layout {info} {seo} {social}>
  {solutions && <Solutions {...solutions} />}
  {benefits && <Benefits {...benefits} />}
  {testimonials && <Testimonials {...testimonials} />}
  {features && <Features {...features} />}
  {faqs && <Faqs {...faqs} />}
  <!-- {services && <Services {...services} />} -->
  {cta && <Cta {...cta} />}
  {newsletters && <Newsletters {...newsletters} />}
</Layout>
