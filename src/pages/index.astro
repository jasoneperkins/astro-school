---
import Layout from '@layouts/Common.astro'

import ContactForm from '@components/ContactForm.astro'
import IconCard from '@components/IconCard.astro'

import Benefits from '@content/benefits.astro'
import Cta from '@content/Cta.astro'
import Services from '@content/services.astro'
import Solutions from '@content/solutions.astro'

import '@styles/pages/home.css'

import {Image} from 'astro:assets'
import {Icon} from 'astro-icon/components'
import {PortableText} from 'astro-portabletext'

import {fetchGraphQL} from '@services/sanity'
import {fetchPage} from '@queries/page'
import {urlFor} from '@services/sanity'

import type {Info} from '@interfaces/info'
import type {Section} from '@interfaces/section'
import type {Seo} from '@interfaces/seo'
import type {Social} from '@interfaces/social'

interface Props {
  info: Info
  content: Section[]
  seo: Seo
  social: Social
}

const homePage = await fetchPage('index')
const {info, content, seo, social} = homePage

const cta = content?.find(
  (section: Section) => section.name === 'call-to-action'
)
const solutions = content?.find(
  (section: Section) => section.name === 'solutions'
)
const benefits = content?.find(
  (section: Section) => section.name === 'benefits'
)
const services = content?.find(
  (section: Section) => section.name === 'services'
)

const giraffImage = urlFor(
  'image-74ac48a28f4b41ac5af29687d875a4075966c9d8-616x1201-webp'
)
  .width(154)
  .height(300)
  .url()
---

<Layout {info} {seo} {social}>
  {benefits && <Benefits content={benefits} />}
  {solutions && <Solutions content={solutions} />}
  {services && <Services content={services} />}
  {cta && <Cta content={cta} />}
</Layout>
