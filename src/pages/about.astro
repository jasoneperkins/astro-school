---
import Layout from '@layouts/Common.astro'

import ContactForm from '@components/ContactForm.astro'
import IconCard from '@components/IconCard.astro'

import {Image} from 'astro:assets'
import {Icon} from 'astro-icon/components'
import {PortableText} from 'astro-portabletext'

import {fetchGraphQL} from '@services/sanity'
import {fetchPage} from '@queries/page'
import {urlFor} from '@services/sanity'

import type {Section} from '@interfaces/section'

const {pathname} = Astro.url
const {info, content, seo} = await fetchPage(pathname.slice(1))

const mission = content?.find(
  (section: Section) => section._key === '5da2bb5455ff'
)
const values = content?.find(
  (section: Section) => section._key === '7b82e68a29d9'
)
const coreValuesSection = content?.find(
  (section: Section) => section.name === 'values' || section.name === 'core-values'
)
---

<Layout {info} {seo}>
  <!-- Our Mission (Introduction Section): Focus on the inclusive environment and the
  Reform Jewish setting. This is a great spot for an image of the Temple or a
  welcoming classroom scene. -->
  {
    mission && (
      <section class="items-center">
        <div class="half relative">
          <Image
            src={urlFor(mission.images?.[0]).width(640).height(640).url()!}
            alt={mission.images?.[0]?.alt || ''}
            width="640"
            height="640"
            class="rounded-full"
          />
          <div class="absolute top-2 right-6 -z-10 size-36 rounded-full bg-linear-35 from-orange-500 to-orange-200" />
        </div>
        <div class="half">
          {mission?.heading?.title && (
            <header>
              <hgroup class="flex flex-col-reverse">
                <h2>{mission.heading.title}</h2>
                {mission?.heading?.subTitle && (
                  <p class="tagline">{mission.heading.subTitle}</p>
                )}
              </hgroup>
            </header>
          )}
          {mission?.body && <PortableText value={mission.body} />}
        </div>
      </section>
    )
  }

  <!-- Core Values (Grid Section): You can use an ItemCard layout (similar to your homepage) to display
Inclusion, Dignity, Growth, and Community with individual icons. -->

  {
    (
      <section class="breakout border-y border-gray-200 bg-gray-100 text-center">
        <header>
          <hgroup>
            <h2>Our Core Values</h2>
            <p>Foundations of Excellence</p>
          </hgroup>
        </header>
        <div class="mt-8 grid grid-cols-1 justify-center gap-8 text-slate-800 md:grid-cols-2 lg:grid-cols-4">
          {coreValuesSection?.cards?.length ? (
            coreValuesSection.cards.map((card: any) => (
              <IconCard
                title={card.title}
                description={card.description}
                sanityIcon={card.icon}
                color={card.color}
                align={coreValuesSection.cardAlign}
              />
            ))
          ) : (
            <>
              <IconCard
                title="Inclusion"
                description="Welcoming all families and faiths into our community."
                color="red"
                align="center"
              />
              <IconCard
                title="Dignity"
                description="Treating every child with the respect they deserve."
                color="blue"
                align="center"
              />
              <IconCard
                title="Growth"
                description="Nurturing both the heart and the mind of every student."
                color="green"
                align="center"
              />
              <IconCard
                title="Community"
                description="Building lasting relationships beyond the classroom."
                color="orange"
                align="center"
              />
            </>
          )}
        </div>
      </section>
    )
  }

  <!-- Our Philosophy (Discovery Section): Highlight the "Learning Through Discovery"
  approach, emphasizing active exploration and social play. -->

  {
    values && (
      <section class="items-center">
        <div class="half">
          {values?.heading?.title && (
            <header>
              <hgroup class="flex flex-col-reverse">
                <h2>{values?.heading?.title}</h2>
                {values.heading?.subTitle && (
                  <p class="tagline">{values?.heading?.subTitle}</p>
                )}
              </hgroup>
            </header>
          )}
          {values?.body && <PortableText value={values.body} />}
        </div>
        {values?.images?.[0] && (
          <div class="half flex justify-center lg:justify-end">
            <Image
              src={urlFor(values?.images[0]).width(640).height(640).url()!}
              alt="Learning through play"
              width="640"
              height="640"
              class="aspect-square w-full max-w-md rounded-full object-cover shadow-lg"
            />
          </div>
        )}
      </section>
    )
  }

  <!-- Our History: Briefly mention the 2007 founding to build trust and longevity. -->

  <!--  -->

  <!-- <section class="breakout border-y border-gray-200 bg-gray-100 text-center">
    <header>
      <hgroup>
        <h2>Our Core Values</h2>
        <p>Foundations of Excellence</p>
      </hgroup>
    </header>
    <div
      class="mt-8 grid grid-cols-1 justify-center gap-8 text-slate-800 md:grid-cols-2 lg:grid-cols-4">
      <div
        class="border-t-4 border-red-500 bg-white px-4 py-8 shadow-sm transition-shadow hover:shadow-md">
        <h3 class="mb-2 text-2xl font-bold">Inclusion</h3>
        <p class="text-sm text-slate-600">
          Welcoming all families and faiths into our community.
        </p>
      </div>
      <div
        class="border-t-4 border-blue-500 bg-white px-4 py-8 shadow-sm transition-shadow hover:shadow-md">
        <h3 class="mb-2 text-2xl font-bold">Dignity</h3>
        <p class="text-sm text-slate-600">
          Treating every child with the respect they deserve.
        </p>
      </div>
      <div
        class="border-t-4 border-green-500 bg-white px-4 py-8 shadow-sm transition-shadow hover:shadow-md">
        <h3 class="mb-2 text-2xl font-bold">Growth</h3>
        <p class="text-sm text-slate-600">
          Nurturing both the heart and the mind of every student.
        </p>
      </div>
      <div
        class="border-t-4 border-orange-500 bg-white px-4 py-8 shadow-sm transition-shadow hover:shadow-md">
        <h3 class="mb-2 text-2xl font-bold">Community</h3>
        <p class="text-sm text-slate-600">
          Building lasting relationships beyond the classroom.
        </p>
      </div>
    </div>
  </section> -->

  <!--  -->

  <!-- <section class="breakout bg-blue-900 py-20 text-white">
    <div
      class="mx-auto grid max-w-6xl grid-cols-2 gap-12 text-center lg:grid-cols-4">
      <div>
        <div class="mb-2 text-5xl font-black text-[var(--color-marigold-400)]">
          25+
        </div>
        <div class="text-xs font-semibold tracking-widest uppercase opacity-80">
          Years of Excellence
        </div>
      </div>
      <div>
        <div class="mb-2 text-5xl font-black text-blue-300">10:1</div>
        <div class="text-xs font-semibold tracking-widest uppercase opacity-80">
          Student-Teacher Ratio
        </div>
      </div>
      <div>
        <div class="mb-2 text-5xl font-black text-[var(--color-jade-400)]">
          100%
        </div>
        <div class="text-xs font-semibold tracking-widest uppercase opacity-80">
          Certified Staff
        </div>
      </div>
      <div>
        <div class="mb-2 text-5xl font-black text-rose-400">150+</div>
        <div class="text-xs font-semibold tracking-widest uppercase opacity-80">
          Happy Families
        </div>
      </div>
    </div>
  </section> -->

  <!-- <section class="items-center">
    <div class="half">
      <header>
        <hgroup class="flex flex-col-reverse">
          <h2>Our History</h2>
          <p class="tagline">From a Dream to a Reality</p>
        </hgroup>
      </header>
      <p>
        The ECLC started as a dream to teach and enrich the lives of young
        children in our community. Since our founding, we have grown into a
        cornerstone of early education in the Stuart area.
      </p>
    </div>
    <div class="half">
      <Image
        src={HowWeLearn01}
        alt="Children learning at a table"
        class="rounded-tr-4xl rounded-bl-4xl shadow-lg"
      />
    </div>
  </section> -->
</Layout>
