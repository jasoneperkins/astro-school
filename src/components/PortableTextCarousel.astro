---
import {Image} from 'astro:assets'
import {urlFor} from '../lib/sanityImage'

const {node} = Astro.props
---

<div class="group relative my-12">
	<div
		class="scrollbar-hide flex snap-x snap-mandatory gap-4 overflow-x-auto rounded-2xl pb-4"
		id="carousel-container">
		{
			node.images?.map((img: any) => (
				<div class="relative aspect-[16/9] w-full flex-none snap-center md:w-3/4">
					<Image
						src={urlFor(img).width(1200).height(675).url()}
						alt={img.caption || 'Carousel image'}
						width={1200}
						height={675}
						class="h-full w-full rounded-2xl object-cover shadow-lg"
					/>
					{img.caption && (
						<div class="absolute right-0 bottom-0 left-0 rounded-b-2xl bg-gradient-to-t from-black/60 to-transparent p-6">
							<p class="font-medium text-white">{img.caption}</p>
						</div>
					)}
				</div>
			))
		}
	</div>

	<div
		class="pointer-events-none absolute top-1/2 right-0 left-0 hidden -translate-y-1/2 justify-between px-2 group-hover:flex">
		<div
			class="pointer-events-auto rounded-full bg-white/80 p-2 text-slate-800 shadow-md">
			←
		</div>
		<div
			class="pointer-events-auto rounded-full bg-white/80 p-2 text-slate-800 shadow-md">
			→
		</div>
	</div>
</div>

<style>
	/* Hides scrollbar for Chrome, Safari and Opera */
	.scrollbar-hide::-webkit-scrollbar {
		display: none;
	}
	/* Hides scrollbar for IE, Edge and Firefox */
	.scrollbar-hide {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}
</style>
