---
import { urlFor } from '@services/sanity'
import '@styles/components/itemCards.css'

interface Props {
  title: string
  description?: string
  image?: {
    asset: {
      url: string
      metadata?: {
        lqip?: string
      }
    }
    alt?: string
  }
  href: string
  cta?: string
}

const { title, description, image, href, cta = 'Read Newsletter' } = Astro.props

const imageUrl = image?.asset?.url
  ? urlFor(image.asset.url).width(640).height(360).url()
  : null
---

<a
  href={href}
  class="item group flex min-w-[160px] max-w-[320px] flex-1 basis-[240px] flex-col overflow-hidden"
>
  {
    imageUrl && (
      <div class="aspect-video w-full overflow-hidden bg-gray-100">
        <img
          src={imageUrl}
          alt={image?.alt || title}
          class="size-full object-cover transition-transform duration-500 group-hover:scale-105"
          loading="lazy"
        />
      </div>
    )
  }
  <div class="flex flex-1 flex-col gap-2 p-6">
    <h3 class="font-bold text-gray-900 group-hover:text-blue-600 transition-colors">
      {title}
    </h3>
    {description && (
      <p class="text-sm leading-relaxed text-gray-800 line-clamp-3">
        {description}
      </p>
    )}
    <div>
      <span class="text-xs font-bold uppercase tracking-wider text-blue-600">
        {cta} &rarr;
      </span>
    </div>
  </div>
</a>
